(function (e) { function m() { var a, l, b, h, e; c = 0; for (k && clearTimeout(k) ; c < d.length; c++) if (null != d[c]) { d[c].ms -= d[c].step; var f = d[c].tag; a = d[c].ms; f.show(); e = a % 1E3; a -= e; a /= 1E3; h = a % 60; a -= h; a /= 60; b = a % 60; a -= b; a /= 60; l = a % 24; a -= l; a /= 24; var g = f.find("[data-name=day]"); 0 < g.length && g.text(a.leftPad("0", 1 < g.length ? 2 : 1)); g = f.find("[data-name=hour]"); 0 < g.length && g.text(l.leftPad("0", 2)); g = f.find("[data-name=hourend]"); 0 < g.length && g.text((l + 24 * a).leftPad("0", 2)); a = f.find("[data-name=minute]"); 0 < a.length && a.text(b.leftPad("0", 2)); a = f.find("[data-name=second]"); 0 < a.length && a.text(h.leftPad("0", 2)); f = f.find("[data-name=milliSecond]"); 0 < f.length && f.text(e); 0 >= d[c].ms && (d[c].stopped && d[c].stopped(d[c].tag), d[c] = null) } k = setTimeout(m, n) } if (e.fn.countDown) console && console.warn("$.fn.countDown\u5df2\u7ecf\u5b58\u5728"); else { Number.prototype.leftPad = function (a, c) { var b = this.toString(), d = c - b.length; if (0 < d) { var e = "", f; for (f = 0; f < d; f++) e += a; b = e + b } return b }; var k = null, d = [], c, n = 1E3; e.fn.countDown = function (a, c) { e(this); if ("countdown" == e(this).attr("data-role")) { var b; b = a.time; b = b instanceof Date ? b.valueOf() : b; if (isNaN(b)) throw "\u65f6\u95f4\u65e0\u6548"; if (!(0 >= b)) { var h = parseInt(a.step); if (isNaN(h)) throw "\u6b65\u957f\u5fc5\u987b\u662f\u6b63\u6570,\u5355\u4f4d:ms"; b = { ms: b, step: h, stopped: a.stopped, tag: e(this) }; d.push(b); c && 1 == c && (k || m()) } } }; e.extend(e, { countDown: function (a, c, b) { "option" == a && "step" == c && (n = b); "go" == a && (k || m()) } }) } })(Zepto);